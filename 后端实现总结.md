# SCNAIæ¤é‰´ç³»ç»Ÿ - åç«¯å®ç°æ€»ç»“

## âœ… å·²å®Œæˆçš„ä»»åŠ¡

### 1. æ•°æ®åº“è®¾è®¡ âœ“
- **ç²¾ç®€è®¾è®¡**: ä»…3å¼ æ ¸å¿ƒè¡¨
  - `users`: ç”¨æˆ·è®¤è¯å’Œä¿¡æ¯
  - `plants`: æ¤ç‰©ä¿¡æ¯åº“
  - `recognition_records`: AIè¯†åˆ«è®°å½•
- **æµ‹è¯•æ•°æ®**: å·²æ’å…¥adminç”¨æˆ·å’Œä¸ç“œæ¤ç‰©æ•°æ®
- **æ–‡ä»¶ä½ç½®**: [backend/database_schema.sql](backend/database_schema.sql)

### 2. åç«¯APIå®ç° âœ“

#### 2.1 ç”¨æˆ·è®¤è¯æ¨¡å—
- âœ… POST `/api/auth/login` - ç”¨æˆ·ç™»å½•
- âœ… GET `/api/auth/verify` - éªŒè¯Token
- âœ… POST `/api/auth/logout` - ç”¨æˆ·ç™»å‡º
- **æŠ€æœ¯**: JWT Tokenè®¤è¯,BCryptå¯†ç åŠ å¯†
- **ä»£ç ä½ç½®**:
  - [AuthController.java](backend/src/main/java/com/scnai/plant/controller/AuthController.java)
  - [AuthService.java](backend/src/main/java/com/scnai/plant/service/AuthService.java)
  - [JwtInterceptor.java](backend/src/main/java/com/scnai/plant/interceptor/JwtInterceptor.java)

#### 2.2 AIå›¾åƒè¯†åˆ«æ¨¡å—
- âœ… POST `/api/recognition` - ä¸Šä¼ å›¾ç‰‡è¯†åˆ«ç—…è™«å®³
- **åŠŸèƒ½**:
  - æ–‡ä»¶éªŒè¯(æ ¼å¼ã€å¤§å°)
  - å›¾åƒä¿å­˜
  - AIè¯†åˆ«(ç›®å‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®,å¯æ¥å…¥Python AIæœåŠ¡)
  - è‡ªåŠ¨ç”Ÿæˆç—‡çŠ¶æè¿°å’Œå¤„ç†æ–¹æ¡ˆ
- **ä»£ç ä½ç½®**:
  - [RecognitionController.java](backend/src/main/java/com/scnai/plant/controller/RecognitionController.java)
  - [RecognitionService.java](backend/src/main/java/com/scnai/plant/service/RecognitionService.java)

#### 2.3 æ¤ç‰©ä¿¡æ¯æŸ¥è¯¢æ¨¡å—
- âœ… GET `/api/plants` - è·å–æ‰€æœ‰æ¤ç‰©åˆ—è¡¨
- âœ… GET `/api/plants/{id}` - æ ¹æ®IDè·å–æ¤ç‰©è¯¦æƒ…
- âœ… GET `/api/plants/search?name=ä¸ç“œ` - æ ¹æ®åç§°æŸ¥è¯¢
- âœ… GET `/api/plants/search/keyword?keyword=ç“œ` - æ¨¡ç³Šæœç´¢
- **ä»£ç ä½ç½®**: [PlantController.java](backend/src/main/java/com/scnai/plant/controller/PlantController.java)

#### 2.4 è¯†åˆ«è®°å½•ç®¡ç†
- âœ… GET `/api/records?page=1&pageSize=10` - åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·è¯†åˆ«è®°å½•
- âœ… GET `/api/records/{id}` - è·å–è®°å½•è¯¦æƒ…
- âœ… GET `/api/records/stats` - è·å–ç»Ÿè®¡æ•°æ®
- **ä»£ç ä½ç½®**: [RecordController.java](backend/src/main/java/com/scnai/plant/controller/RecordController.java)

#### 2.5 AIæ™ºèƒ½é—®ç­”(SSEæµå¼)
- âœ… POST `/api/chat/stream` - æµå¼AIé—®ç­”
- **åŠŸèƒ½**:
  - SSE(Server-Sent Events)æµå¼å“åº”
  - æ¨¡æ‹Ÿæ‰“å­—æœºæ•ˆæœ
  - æ”¯æŒç—…è™«å®³ç›¸å…³é—®é¢˜è§£ç­”
- **ä»£ç ä½ç½®**:
  - [ChatController.java](backend/src/main/java/com/scnai/plant/controller/ChatController.java)
  - [ChatService.java](backend/src/main/java/com/scnai/plant/service/ChatService.java)

### 3. Python AIè¯†åˆ«æœåŠ¡ âœ“
- **åŸºäº**: åŸæœ‰çš„[webwork.py](webwork.py)å®ç°
- **æ¨¡å‹**: EfficientNet-B0
- **APIæ¥å£**:
  - GET `/health` - å¥åº·æ£€æŸ¥
  - POST `/predict` - å›¾åƒè¯†åˆ«
  - POST `/predict/batch` - æ‰¹é‡è¯†åˆ«
- **ç«¯å£**: 5001
- **æ–‡ä»¶ä½ç½®**: [ai_service.py](ai_service.py)

### 4. é¡¹ç›®é…ç½® âœ“
- âœ… Mavené…ç½®: [pom.xml](backend/pom.xml)
- âœ… åº”ç”¨é…ç½®: [application.properties](backend/src/main/resources/application.properties)
- âœ… Pythonä¾èµ–: [requirements.txt](requirements.txt)
- âœ… å¯åŠ¨è„šæœ¬: [start.bat](start.bat) / [start.sh](start.sh)
- âœ… éƒ¨ç½²æ–‡æ¡£: [backend/README.md](backend/README.md)

## ğŸ“ å®Œæ•´ä»£ç ç»“æ„

```
SCNAI/
â”œâ”€â”€ backend/                                # Javaåç«¯
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â”œâ”€â”€ java/com/scnai/plant/
â”‚   â”‚   â”‚   â”œâ”€â”€ PlantApplication.java      # ä¸»åº”ç”¨
â”‚   â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ApiResponse.java       # é€šç”¨å“åº”
â”‚   â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ WebConfig.java         # Webé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/                # 5ä¸ªæ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthController.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RecognitionController.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PlantController.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RecordController.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ChatController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/                       # 4ä¸ªDTO
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginRequest.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginResponse.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RecognitionResponse.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ChatRequest.java
â”‚   â”‚   â”‚   â”œâ”€â”€ entity/                    # 3ä¸ªå®ä½“
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Plant.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RecognitionRecord.java
â”‚   â”‚   â”‚   â”œâ”€â”€ interceptor/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ JwtInterceptor.java    # JWTæ‹¦æˆªå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ repository/                # 3ä¸ªRepository
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserRepository.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PlantRepository.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RecognitionRecordRepository.java
â”‚   â”‚   â”‚   â”œâ”€â”€ service/                   # 3ä¸ªæœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthService.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RecognitionService.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ChatService.java
â”‚   â”‚   â”‚   â””â”€â”€ util/
â”‚   â”‚   â”‚       â””â”€â”€ JwtUtil.java           # JWTå·¥å…·
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â””â”€â”€ application.properties     # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database_schema.sql                # æ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ pom.xml                            # Mavené…ç½®
â”‚   â””â”€â”€ README.md                          # éƒ¨ç½²æ–‡æ¡£
â”œâ”€â”€ ai_service.py                          # Python AIæœåŠ¡
â”œâ”€â”€ webwork.py                             # AIæ¨¡å‹åŸå®ç°
â”œâ”€â”€ requirements.txt                       # Pythonä¾èµ–
â”œâ”€â”€ start.bat                              # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ start.sh                               # Linux/Macå¯åŠ¨è„šæœ¬
â””â”€â”€ å‰åç«¯å¼€å‘æ¥å£æ–‡æ¡£.md                  # æ¥å£æ–‡æ¡£

æ€»è®¡:
- Javaæ–‡ä»¶: 25ä¸ª
- é…ç½®æ–‡ä»¶: 5ä¸ª
- Pythonæ–‡ä»¶: 2ä¸ª
- æ–‡æ¡£: 3ä¸ª
```

## ğŸ”§ æŠ€æœ¯æ ˆ

### åç«¯(Java)
- **æ¡†æ¶**: Spring Boot 3.2.1
- **æ•°æ®åº“**: MySQL 8.0 + Spring Data JPA
- **è®¤è¯**: JWT (JJWT 0.12.3)
- **å¯†ç åŠ å¯†**: BCrypt (Spring Security Crypto)
- **å·¥å…·**: Lombok, Validation
- **æ„å»º**: Maven

### AIæœåŠ¡(Python)
- **æ·±åº¦å­¦ä¹ **: PyTorch + EfficientNet
- **Webæ¡†æ¶**: Flask
- **å›¾åƒå¤„ç†**: PIL/Pillow
- **æ•°å€¼è®¡ç®—**: NumPy

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½ç‰¹ç‚¹

### 1. ç®€æ´è®¾è®¡
- âœ… ä»…3å¼ æ•°æ®åº“è¡¨
- âœ… ä»£ç ç»“æ„æ¸…æ™°,åˆ†å±‚æ˜ç¡®
- âœ… å……è¶³çš„ä¸­æ–‡æ³¨é‡Š

### 2. å®Œæ•´åŠŸèƒ½
- âœ… ç”¨æˆ·è®¤è¯(JWT)
- âœ… AIå›¾åƒè¯†åˆ«
- âœ… æ¤ç‰©ä¿¡æ¯åº“
- âœ… è¯†åˆ«å†å²è®°å½•
- âœ… AIæ™ºèƒ½é—®ç­”(SSEæµå¼)

### 3. æ˜“äºæ‰©å±•
- âœ… å¯æ¥å…¥çœŸå®LLM API
- âœ… å¯é›†æˆPython AIæœåŠ¡
- âœ… æ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–æ•°æ®åº“
```bash
mysql -u root -p < backend/database_schema.sql
```

### 2. é…ç½®æ–‡ä»¶
ä¿®æ”¹ `backend/src/main/resources/application.properties`:
```properties
spring.datasource.password=your_password
```

### 3. å¯åŠ¨æœåŠ¡

#### Windows:
```bash
start.bat
```

#### Linux/Mac:
```bash
chmod +x start.sh
./start.sh
```

#### æ‰‹åŠ¨å¯åŠ¨:
```bash
# Python AIæœåŠ¡
python ai_service.py

# Javaåç«¯
cd backend
mvn spring-boot:run
```

### 4. è®¿é—®æµ‹è¯•
```bash
# åç«¯API
http://localhost:5000/api

# Python AIæœåŠ¡
http://localhost:5001

# æµ‹è¯•ç™»å½•
curl -X POST http://localhost:5000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"password123"}'
```

## ğŸ“Š APIæ¥å£æ€»è§ˆ

| æ¨¡å— | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è®¤è¯ |
|------|------|------|------|------|
| è®¤è¯ | POST | /auth/login | ç”¨æˆ·ç™»å½• | âŒ |
| è®¤è¯ | GET | /auth/verify | éªŒè¯Token | âœ… |
| è®¤è¯ | POST | /auth/logout | ç”¨æˆ·ç™»å‡º | âœ… |
| è¯†åˆ« | POST | /recognition | å›¾åƒè¯†åˆ« | âœ… |
| æ¤ç‰© | GET | /plants | è·å–æ¤ç‰©åˆ—è¡¨ | âœ… |
| æ¤ç‰© | GET | /plants/{id} | æ¤ç‰©è¯¦æƒ… | âœ… |
| æ¤ç‰© | GET | /plants/search | æŸ¥è¯¢æ¤ç‰© | âœ… |
| è®°å½• | GET | /records | è¯†åˆ«è®°å½•åˆ—è¡¨ | âœ… |
| è®°å½• | GET | /records/{id} | è®°å½•è¯¦æƒ… | âœ… |
| è®°å½• | GET | /records/stats | ç»Ÿè®¡æ•°æ® | âœ… |
| é—®ç­” | POST | /chat/stream | AIé—®ç­”(SSE) | âœ… |

## ğŸ’¡ åç»­ä¼˜åŒ–å»ºè®®

### 1. Javaåç«¯
- [ ] é›†æˆçœŸå®LLM API(OpenAI/DeepSeek)
- [ ] æ·»åŠ Redisç¼“å­˜
- [ ] å®ç°Tokené»‘åå•(é˜²æ­¢ç™»å‡ºåç»§ç»­ä½¿ç”¨)
- [ ] æ·»åŠ è¯·æ±‚é™æµ
- [ ] å®Œå–„å¼‚å¸¸å¤„ç†
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•

### 2. Python AIæœåŠ¡
- [ ] è¿æ¥åˆ°Javaåç«¯(HTTPè°ƒç”¨)
- [ ] æ·»åŠ æ‰¹é‡è¯†åˆ«é˜Ÿåˆ—
- [ ] ä¼˜åŒ–æ¨¡å‹åŠ è½½é€Ÿåº¦
- [ ] GPUåŠ é€Ÿæ¨ç†
- [ ] æ·»åŠ æ¨¡å‹çƒ­æ›´æ–°

### 3. æ•°æ®åº“
- [ ] æ·»åŠ æ›´å¤šæ¤ç‰©æ•°æ®
- [ ] ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- [ ] æ·»åŠ æ•°æ®å¤‡ä»½ç­–ç•¥

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¯†ç å®‰å…¨**: æµ‹è¯•è´¦å·å¯†ç å·²é¢„è®¾,ç”Ÿäº§ç¯å¢ƒåŠ¡å¿…ä¿®æ”¹
2. **JWT Secret**: é…ç½®æ–‡ä»¶ä¸­çš„JWTå¯†é’¥éœ€è¦ä¿®æ”¹ä¸ºå¼ºå¯†é’¥
3. **æ–‡ä»¶ä¸Šä¼ **: ç¡®ä¿uploadsç›®å½•æœ‰å†™æƒé™
4. **AIæ¨¡å‹**: éœ€è¦æ¨¡å‹æ–‡ä»¶`models/best_model_g8lg426c.pth`
5. **æ•°æ®åº“è¿æ¥**: æ ¹æ®å®é™…ç¯å¢ƒä¿®æ”¹æ•°æ®åº“é…ç½®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

è¯¦ç»†éƒ¨ç½²å’Œä½¿ç”¨è¯´æ˜è¯·æŸ¥çœ‹:
- [åç«¯éƒ¨ç½²æ–‡æ¡£](backend/README.md)
- [æ¥å£æ–‡æ¡£](å‰åç«¯å¼€å‘æ¥å£æ–‡æ¡£.md)

---

**é¡¹ç›®å®Œæˆæ—¶é—´**: 2024-01-16
**ä»£ç æ€»è¡Œæ•°**: çº¦2500è¡Œ(Java) + 200è¡Œ(Python)
**æ–‡æ¡£æ€»å­—æ•°**: çº¦15000å­—
