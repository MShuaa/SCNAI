import{_,c as i,a as k,b as s,r as w,e as y,h as M,t as x,w as v,i as g,v as b,j as I,d as h,f as d,o as C,k as N,u as P,g as m}from"./index-BlU5efSE.js";import{P as V,_ as U}from"./logo-BtVPCAG9.js";import{u as B,a as L}from"./auth-Bm6ta8Sy.js";const A={name:"Login",components:{ParticlesBackground:V},setup(){const p=P(),e=N(),f=B(),o=d(""),c=d(""),t=d(!1),l=d(!1),r=d("");return C(()=>{if(localStorage.getItem("rememberMe")==="true"){const n=localStorage.getItem("savedUsername");n&&(o.value=n,t.value=!0)}}),{username:o,password:c,remember:t,loading:l,errorMessage:r,handleLogin:async()=>{var u,n;r.value="",l.value=!0;try{const a=await L.login(o.value,c.value,t.value);if(a.success){f.setAuth(a.data.token,a.data.user),localStorage.setItem("rememberMe",t.value),t.value?localStorage.setItem("savedUsername",o.value):localStorage.removeItem("savedUsername");const S=e.query.redirect||"/dashboard";p.push(S)}else r.value=a.error||"用户名或密码错误"}catch(a){console.error("登录错误:",a),r.value=((n=(u=a.response)==null?void 0:u.data)==null?void 0:n.error)||"登录失败，请稍后重试"}finally{l.value=!1}},handleForgotPassword:()=>{alert("请联系管理员重置密码")},handleSupport:()=>{alert("技术支持电话：400-123-4567")}}}},F={class:"login-container"},q={class:"login-card"},D={class:"login-body"},R={key:0,class:"error-message show"},T={class:"form-group"},j={class:"form-group"},E={class:"form-help"},z={class:"form-remember"},G=["disabled"],H={key:0},J={key:1},K={class:"login-footer"},O={class:"login-footer-text"};function Q(p,e,f,o,c,t){const l=w("ParticlesBackground");return m(),i("div",null,[k(l),s("div",F,[s("div",q,[e[11]||(e[11]=y('<div class="login-header" data-v-eb73ed05><div class="login-logo" data-v-eb73ed05><img src="'+U+'" alt="SCNAI植鉴" data-v-eb73ed05><div data-v-eb73ed05><h1 class="login-title" data-v-eb73ed05>SCNAI植鉴</h1><p class="login-subtitle" data-v-eb73ed05>智能农业 · 精准识别</p></div></div></div>',1)),s("div",D,[o.errorMessage?(m(),i("div",R,x(o.errorMessage),1)):M("",!0),s("form",{onSubmit:e[4]||(e[4]=v((...r)=>o.handleLogin&&o.handleLogin(...r),["prevent"]))},[s("div",T,[e[6]||(e[6]=s("label",{class:"form-label",for:"username"},"用户名",-1)),g(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=r=>o.username=r),class:"form-control",placeholder:"请输入用户名",required:""},null,512),[[b,o.username]])]),s("div",j,[e[7]||(e[7]=s("label",{class:"form-label",for:"password"},"密码",-1)),g(s("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=r=>o.password=r),class:"form-control",placeholder:"请输入密码",required:""},null,512),[[b,o.password]])]),s("div",E,[s("div",z,[g(s("input",{type:"checkbox",id:"remember","onUpdate:modelValue":e[2]||(e[2]=r=>o.remember=r)},null,512),[[I,o.remember]]),e[8]||(e[8]=s("label",{for:"remember"},"记住我",-1))]),s("a",{href:"#",onClick:e[3]||(e[3]=v((...r)=>o.handleForgotPassword&&o.handleForgotPassword(...r),["prevent"])),class:"form-forgot"},"忘记密码？")]),s("button",{type:"submit",class:"btn-login",disabled:o.loading},[o.loading?(m(),i("span",H,[...e[9]||(e[9]=[s("i",{class:"fas fa-spinner fa-spin"},null,-1),h(" 登录中...",-1)])])):(m(),i("span",J,"登录"))],8,G)],32)]),s("div",K,[s("p",O,[e[10]||(e[10]=h("© 2025 SCNAI植鉴 | ",-1)),s("a",{href:"#",onClick:e[5]||(e[5]=v((...r)=>o.handleSupport&&o.handleSupport(...r),["prevent"])),class:"login-footer-link"},"技术支持")])])])])])}const oe=_(A,[["render",Q],["__scopeId","data-v-eb73ed05"]]);export{oe as default};
