import{P as vs}from"./logo-BtVPCAG9.js";import{S as fs}from"./Sidebar-C2eUXXSZ.js";import{u as us}from"./auth-Bm6ta8Sy.js";import{d as w}from"./dashboard--ArtrLqc.js";import{_ as ms,c as d,a as ns,b as s,r as ls,t as e,e as _s,F as rs,l as cs,d as gs,f as _,m as hs,o as bs,g as n,n as g}from"./index-BlU5efSE.js";const ps="/assets/shigua-C8XGGpY5.jpeg",ys="/assets/map-Dzl2oJnV.jpeg",ws={name:"Dashboard",components:{ParticlesBackground:vs,Sidebar:fs},setup(){const x=us(),t=_(null),h=_([]),a=_([]),r=_(!0),S=hs(()=>x.user),b=async()=>{try{r.value=!0;const[o,l,m]=await Promise.all([w.getStats(),w.getActivities(),w.getRecords()]);t.value=o.data,h.value=l.data,a.value=m.data}catch(o){console.error("加载数据失败:",o)}finally{r.value=!1}},p=o=>({识别:"fas fa-search",操作:"fas fa-cog",查看:"fas fa-eye"})[o]||"fas fa-circle",c=o=>({识别:"detection",操作:"maintenance",查看:"update"})[o]||"",v=o=>o==="重度"?"badge-danger":o==="中度"?"badge-warning":"badge-success",f=o=>o==="已处理"?"badge-success":o==="处理中"?"badge-warning":"badge-danger",u=()=>{alert("导出功能开发中...")};return bs(()=>{b()}),{user:S,stats:t,activities:h,records:a,loading:r,getActivityIcon:p,getActivityIconClass:c,getSeverityBadgeClass:v,getStatusBadgeClass:f,exportData:u}}},xs={class:"container"},Ss={class:"main-content"},ks={class:"top-nav"},Cs={class:"top-nav-user"},Bs={class:"user-info"},Ds={class:"user-name"},As={class:"user-role"},Hs={class:"card drone-status"},Ps={class:"drone-info"},Is={class:"drone-stats"},Vs={class:"drone-stat-item"},Ns={class:"drone-stat-value"},Rs={class:"drone-stat-item"},js={class:"drone-stat-value"},zs={class:"drone-stat-item"},Fs={class:"drone-stat-value"},Gs={class:"drone-stat-item"},Es={class:"drone-stat-value"},Js={class:"map-weather-container"},Ls={class:"card weather-info"},Ms={class:"weather-content"},Ts={class:"weather-current"},Xs={class:"weather-temp"},Ys={class:"weather-desc"},qs={class:"weather-stats"},Ks={class:"weather-stat"},Os={class:"stat-value"},Qs={class:"weather-stat"},Us={class:"stat-value"},Ws={class:"weather-stat"},Zs={class:"stat-value"},$s={class:"weather-forecast"},st={class:"forecast-items"},tt={class:"forecast-item"},at={class:"forecast-temp"},et={class:"forecast-desc"},ot={class:"forecast-item"},it={class:"forecast-temp"},dt={class:"forecast-desc"},nt={class:"forecast-item"},lt={class:"forecast-temp"},rt={class:"forecast-desc"},ct={class:"card activity-log"},vt={id:"activities-container"},ft={key:0,style:{display:"flex","justify-content":"center","align-items":"center",height:"100px"}},ut={key:1},mt={class:"activity-content"},_t={class:"activity-title"},gt={class:"activity-time"},ht={class:"card data-table-card"},bt={class:"card-header"},pt={class:"card-actions"},yt={class:"table-container"},wt={class:"data-table"};function xt(x,t,h,a,r,S){var c,v,f,u,o,l,m,k,C,B,D,A,H,P,I,V,N,R,j,z,F,G,E,J,L,M,T,X,Y,q,K,O,Q,U,W,Z,$,ss,ts,as,es,os,is,ds;const b=ls("ParticlesBackground"),p=ls("Sidebar");return n(),d("div",xs,[ns(b),ns(p),s("main",Ss,[s("div",ks,[t[2]||(t[2]=s("h2",{class:"top-nav-title"},"主控制台",-1)),s("div",Cs,[t[1]||(t[1]=s("div",{class:"user-avatar"},[s("i",{class:"fas fa-user"})],-1)),s("div",Bs,[s("div",Ds,e(((c=a.user)==null?void 0:c.username)||"管理员"),1),s("div",As,e(((v=a.user)==null?void 0:v.role)||"系统管理员"),1)])])]),s("div",Hs,[t[8]||(t[8]=s("img",{src:ps,alt:"无人机",class:"drone-image"},null,-1)),s("div",Ps,[t[7]||(t[7]=s("h3",{class:"drone-name"},"农业监测无人机 #001",-1)),s("div",Is,[s("div",Vs,[s("div",Ns,e(((u=(f=a.stats)==null?void 0:f.drone)==null?void 0:u.status)||"正常"),1),t[3]||(t[3]=s("div",{class:"drone-stat-label"},"状态",-1))]),s("div",Rs,[s("div",js,e(((l=(o=a.stats)==null?void 0:o.drone)==null?void 0:l.battery)||85)+"%",1),t[4]||(t[4]=s("div",{class:"drone-stat-label"},"电量",-1))]),s("div",zs,[s("div",Fs,e(((k=(m=a.stats)==null?void 0:m.drone)==null?void 0:k.range)||12.5)+"km",1),t[5]||(t[5]=s("div",{class:"drone-stat-label"},"航程",-1))]),s("div",Gs,[s("div",Es,e(((B=(C=a.stats)==null?void 0:C.drone)==null?void 0:B.endurance)||25)+"分钟",1),t[6]||(t[6]=s("div",{class:"drone-stat-label"},"续航",-1))])])])]),s("div",Js,[t[24]||(t[24]=_s('<div class="card field-map" data-v-f17141f2><img src="'+ys+'" alt="农田地图" class="map-image" data-v-f17141f2><div class="map-overlay" data-v-f17141f2><div style="text-align:center;" data-v-f17141f2><h3 style="font-size:24px;margin-bottom:10px;" data-v-f17141f2>丝瓜种植区监测地图</h3><p style="color:#a8b2d1;margin-bottom:20px;" data-v-f17141f2>点击地图上的标记查看详细信息</p><button class="btn btn-primary" data-v-f17141f2><i class="fas fa-play" data-v-f17141f2></i> 开始无人机巡航 </button></div></div></div>',1)),s("div",Ls,[t[23]||(t[23]=s("div",{class:"card-header"},[s("h3",{class:"card-title"},"实时天气"),s("div",{class:"card-icon"},[s("i",{class:"fas fa-cloud-sun"})])],-1)),s("div",Ms,[s("div",Ts,[s("div",Xs,e(((A=(D=a.stats)==null?void 0:D.weather)==null?void 0:A.temp)||26)+"°C",1),s("div",Ys,e(((P=(H=a.stats)==null?void 0:H.weather)==null?void 0:P.desc)||"晴朗"),1),t[9]||(t[9]=s("div",{class:"weather-location"},[s("i",{class:"fas fa-map-marker-alt"}),s("span",null,"丝瓜种植区 A区")],-1))]),s("div",qs,[s("div",Ks,[t[10]||(t[10]=s("div",{class:"stat-label"},"湿度",-1)),s("div",Os,e(((V=(I=a.stats)==null?void 0:I.weather)==null?void 0:V.humidity)||65)+"%",1),t[11]||(t[11]=s("i",{class:"fas fa-tint"},null,-1))]),s("div",Qs,[t[12]||(t[12]=s("div",{class:"stat-label"},"风速",-1)),s("div",Us,e(((R=(N=a.stats)==null?void 0:N.weather)==null?void 0:R.windSpeed)||3.2)+" m/s",1),t[13]||(t[13]=s("i",{class:"fas fa-wind"},null,-1))]),s("div",Ws,[t[14]||(t[14]=s("div",{class:"stat-label"},"气压",-1)),s("div",Zs,e(((z=(j=a.stats)==null?void 0:j.weather)==null?void 0:z.pressure)||1013)+" hPa",1),t[15]||(t[15]=s("i",{class:"fas fa-compress"},null,-1))])]),s("div",$s,[t[22]||(t[22]=s("h4",{class:"forecast-title"},"未来预测",-1)),s("div",st,[s("div",tt,[t[16]||(t[16]=s("div",{class:"forecast-time"},"2h后",-1)),t[17]||(t[17]=s("div",{class:"forecast-icon"},[s("i",{class:"fas fa-sun"})],-1)),s("div",at,e(((J=(E=(G=(F=a.stats)==null?void 0:F.weather)==null?void 0:G.forecast)==null?void 0:E.twoHours)==null?void 0:J.temp)||25)+"°",1),s("div",et,e((((X=(T=(M=(L=a.stats)==null?void 0:L.weather)==null?void 0:M.forecast)==null?void 0:T.twoHours)==null?void 0:X.desc)||"晴朗").substring(0,2)),1)]),s("div",ot,[t[18]||(t[18]=s("div",{class:"forecast-time"},"6h后",-1)),t[19]||(t[19]=s("div",{class:"forecast-icon"},[s("i",{class:"fas fa-cloud"})],-1)),s("div",it,e(((O=(K=(q=(Y=a.stats)==null?void 0:Y.weather)==null?void 0:q.forecast)==null?void 0:K.sixHours)==null?void 0:O.temp)||23)+"°",1),s("div",dt,e((((Z=(W=(U=(Q=a.stats)==null?void 0:Q.weather)==null?void 0:U.forecast)==null?void 0:W.sixHours)==null?void 0:Z.desc)||"多云").substring(0,2)),1)]),s("div",nt,[t[20]||(t[20]=s("div",{class:"forecast-time"},"12h后",-1)),t[21]||(t[21]=s("div",{class:"forecast-icon"},[s("i",{class:"fas fa-cloud-rain"})],-1)),s("div",lt,e(((as=(ts=(ss=($=a.stats)==null?void 0:$.weather)==null?void 0:ss.forecast)==null?void 0:ts.twelveHours)==null?void 0:as.temp)||20)+"°",1),s("div",rt,e((((ds=(is=(os=(es=a.stats)==null?void 0:es.weather)==null?void 0:os.forecast)==null?void 0:is.twelveHours)==null?void 0:ds.desc)||"小雨").substring(0,2)),1)])])])])])]),s("div",ct,[t[26]||(t[26]=s("div",{class:"card-header"},[s("h3",{class:"card-title"},"最近活动"),s("div",{class:"card-icon"},[s("i",{class:"fas fa-history"})])],-1)),s("div",vt,[a.loading?(n(),d("div",ft,[...t[25]||(t[25]=[s("span",{class:"loader"},null,-1)])])):(n(),d("div",ut,[(n(!0),d(rs,null,cs(a.activities,(i,y)=>(n(),d("div",{key:y,class:"activity-item"},[s("div",{class:g(["activity-icon",a.getActivityIconClass(i.type)])},[s("i",{class:g(a.getActivityIcon(i.type))},null,2)],2),s("div",mt,[s("div",_t,e(i.action),1),s("div",gt,e(i.time),1)])]))),128))]))])]),s("div",ht,[s("div",bt,[t[28]||(t[28]=s("h3",{class:"card-title"},"详细数据记录",-1)),s("div",pt,[s("button",{class:"btn btn-secondary",onClick:t[0]||(t[0]=(...i)=>a.exportData&&a.exportData(...i))},[...t[27]||(t[27]=[s("i",{class:"fas fa-download"},null,-1),gs(" 导出数据 ",-1)])])])]),s("div",yt,[s("table",wt,[t[30]||(t[30]=s("thead",null,[s("tr",null,[s("th",null,"日期"),s("th",null,"区域"),s("th",null,"病虫害类型"),s("th",null,"识别数量"),s("th",null,"严重程度"),s("th",null,"处理状态"),s("th",null,"操作")])],-1)),s("tbody",null,[(n(!0),d(rs,null,cs(a.records,(i,y)=>(n(),d("tr",{key:y},[s("td",null,e(i.date),1),s("td",null,e(i.area),1),s("td",null,e(i.disease),1),s("td",null,e(i.count),1),s("td",null,[s("span",{class:g(["badge",a.getSeverityBadgeClass(i.severity)])},e(i.severity),3)]),s("td",null,[s("span",{class:g(["badge",a.getStatusBadgeClass(i.status)])},e(i.status),3)]),t[29]||(t[29]=s("td",null,[s("button",{class:"btn btn-secondary btn-sm"},"查看详情")],-1))]))),128))])])])])])])}const At=ms(ws,[["render",xt],["__scopeId","data-v-f17141f2"]]);export{At as default};
